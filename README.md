# smfgen

This tool generates an SMF manifest from a JSON description of the service.
It's only intended to generate simple manifests. For more details, see smf(5).

This tool is still experimental. 


# JSON Input

    /*
     * Emits an SMF manifest for the service described by the given JSON:
     *
     * ident            The SMF identifier for the service.  The full SMF
     *                  identifier (FMRI) will be constructed from the category
     *                  and identifier.
     *
     * [category]       Service category (default: "application").
     *
     * label            The human-readable name of the service.
     *
     * [dependencies]   Array of service FMRIs that must be online before
     *                  this service is started.
     *
     * start            Script that starts the actual service. This invocation
     *                  may run the service synchronously or in the background.
     *                  Note that this mechanism does not allow you to use
     *                  SMF's built in timeout for service startup, since it
     *                  doesn't know when the service has actually started.
     *
     * [stop]           Script that stops this service.
     */


# Example

    $ cat bapi.json 
    {
        "ident": "bapi",
        "label": "Boilerplate API",
        "start": "node bapi.js"
    }

    $ ./smfgen < bapi.json 
    <?xml version="1.0"?>
    <!DOCTYPE service_bundle SYSTEM "/usr/share/lib/xml/dtd/service_bundle.dtd.1">
    <!-- 
        Manifest automatically generated by smfgen.
     -->
    <service_bundle type="manifest" name="application-bapi" >
        <service name="application/bapi" type="service" version="1" >
            <create_default_instance enabled="true" />
            <dependency name="svc:/milestone/multi-user:default" grouping="require_all" restart_on="error" type="service" >
                <service_fmri value="svc:/milestone/multi-user:default" />
            </dependency>
            <exec_method type="method" name="start" exec="node bapi.js &amp;" timeout_seconds="10" />
            <exec_method type="method" name="stop" exec=":kill" timeout_seconds="30" />
            <template >
                <common_name >
                    <loctext xml:lang="C" >Boilerplate API</loctext>
                </common_name>
            </template>
        </service>
    </service_bundle>
